<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>ğŸ¸ GOG â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï¼ˆã‚¹ãƒãƒ›/PCå¯¾å¿œï¼‰</title>

<style>
  :root{
    --gold:#c9a227;
    --muted:#d9cfc6;
    --navy:#0b1530;
    --card-bg:#0f1726;
    --card-wood:#141418;
    --accent-dark:#201814;
    --gap:12px;
    --btn-size-desktop:40px;
    --btn-size-mobile:54px;
    --radius:12px;
    --danger:#b94a4a;
    --glass: rgba(255,255,255,0.03);
  }

  *{box-sizing:border-box;}
  html,body{height:100%; margin:0;}

  body{
    padding:20px;
    font-family:"Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, var(--navy), #071028);
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    display:flex;
    flex-direction:column;
    padding-bottom:260px; /* ãƒ•ãƒƒã‚¿ãƒ¼åˆ†ä½™ç™½ */
  }

  main{
    flex:1;
    display:flex;
    flex-direction:column;
    width:100%;
  }

  .container{max-width:1200px; margin:0 auto;}

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:18px;
  }

  .title-wrap{display:flex; flex-direction:column;}
  h1{margin:0; color:var(--gold); font-size:20px;}
  .subtitle{font-size:13px; color:#d6c99a;}

  .top-controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
  .btn{
    background: linear-gradient(180deg,#2b2330,#271f1b);
    color:var(--muted);
    border:1px solid rgba(255,255,255,0.04);
    border-radius:10px;
    padding:8px 10px;
    cursor:pointer;
    font-size:14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.45);
  }
  .btn:hover{filter:brightness(1.05); color:var(--gold);}

  /* --- ãƒ¡ãƒ‹ãƒ¥ãƒ¼é…ç½® --- */
  .menu-area{display:grid; grid-template-columns:1fr 1fr; gap:18px;}
  @media (max-width:900px){ .menu-area{grid-template-columns:1fr;} }

  .menu-group{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    padding:10px !important;
    border-radius:var(--radius);
    margin-bottom:10px !important;
    box-shadow: 0 8px 28px rgba(0,0,0,0.45);
    border:1px solid rgba(255,255,255,0.02);
  }

  .menu-group-header{
    background: rgba(201,162,39,0.12);
    padding: 8px 12px !important;
    border-radius: 10px;
    margin-bottom:10px !important;
    border: 1px solid rgba(201,162,39,0.25);
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .menu-group-header h2{
    margin:0;
    font-size:18px !important;
    color:var(--gold);
    font-weight:900;
    display:flex;
    align-items:center;
  }

  .menu-item{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));
    border-radius:10px;
    padding:8px 10px !important;
    margin-bottom:10px !important;
    border:1px solid rgba(255,255,255,0.02);
    display:flex;
    flex-direction:column;
    gap:6px !important;
  }

  .top-line{
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .name{font-weight:700; font-size:15px;}
  .price{min-width:80px; text-align:right; color:#efe9d6; font-weight:700; font-size:15px;}

  .qty-label{font-size:13px; color:#d0c6b8;}

  .controls-row{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:8px;
  }

  .btn-row{
    display:flex;
    align-items:center;
    gap:8px;
  }

  .qty-btn{
    width:var(--btn-size-desktop);
    height:var(--btn-size-desktop);
    display:grid;
    place-items:center;
    border-radius:8px;
    background:linear-gradient(180deg,#241b16,#3a2b24);
    color:var(--muted);
    border:1px solid rgba(255,255,255,0.03);
    cursor:pointer;
    font-weight:800;
    touch-action:manipulation;
  }

  .qty{
    min-width:56px;
    text-align:center;
    font-weight:800;
    font-size:16px;
    color:#fff;
  }

  /* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰æ™‚ã®ã¿å‰Šé™¤ãƒœã‚¿ãƒ³ */
  .delete-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.04);
    padding:6px 8px;
    border-radius:8px;
    color:var(--muted);
    cursor:pointer;
    display:none !important;
  }
  body.edit-mode .delete-btn{
    display:inline-block !important;
  }

  .summary{
    margin-top:14px;
    padding:14px;
    background:rgba(255,255,255,0.03);
    border-radius:12px;
  }

  .order-line{
    display:flex;
    justify-content:space-between;
    margin-bottom:8px;
  }

  /* --- è¿½å°¾ãƒ•ãƒƒã‚¿ãƒ¼ --- */
  .total-bar{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    display:flex;
    justify-content:center;
    z-index:9999;
  }

  .total-bar-inner{
    width:100%;
    max-width:1200px;
    background:linear-gradient(180deg,#c9a227,#9f821d);
    padding:12px 18px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-top:2px solid rgba(255,255,255,0.3);
    box-shadow:0 -4px 18px rgba(0,0,0,0.6);
  }

  .total-text{
    font-size:22px;
    font-weight:900;
    color:white;
  }

  .reset-btn-footer{
    padding:10px 18px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.45);
    color:white;
    background:rgba(0,0,0,0.25);
    cursor:pointer;
  }

  .device-indicator{
    position:fixed;
    bottom:80px;
    right:10px;
    background:rgba(0,0,0,0.45);
    padding:6px 10px;
    border-radius:8px;
  }

  .top-logo{ display:none !important; }

  /* ã‚¹ãƒãƒ›ç‰ˆãƒ•ã‚©ãƒ³ãƒˆã‚¢ãƒƒãƒ— */
  @media (max-width:600px){
    .name{font-size:17px !important;}
    .price{font-size:17px !important;}
    .qty-label{font-size:15px !important;}
    .qty{font-size:19px !important;}

    .qty-btn{
      width:50px !important;
      height:50px !important;
      font-size:18px !important;
    }
  }
</style>
</head>

<body>
<main>
<div class="container">

<header>
  <div class="title-wrap">
    <h1 id="pageTitle">ğŸ¸ GOG ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>
    <div class="subtitle">ã‚¹ãƒãƒ› / PC è‡ªå‹•åˆ‡æ›¿å¯¾å¿œ</div>
  </div>

  <div class="top-controls">
    <button class="btn small" id="editModeBtn">ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</button>
    <button class="btn small" id="deviceToggleBtn">PC/ã‚¹ãƒãƒ›åˆ‡æ›¿</button>
  </div>
</header>

<div id="menuArea" class="menu-area"></div>

<div id="summary" class="summary"></div>

</div>

<div id="deviceIndicator" class="device-indicator"></div>
<!-- ==========================
  è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
=========================== -->
<div id="addDialog" class="dialog hidden" style="
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,0.6); z-index:9999;">
  <div class="dialog-content" style="
    background:linear-gradient(180deg,#0f1113,#141417);
    padding:16px; border-radius:12px; width:320px;
    color:var(--muted); border:1px solid rgba(255,255,255,0.02);">
    <h3>ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ </h3>
    <input id="addName" placeholder="å•†å“å">
    <input id="addPrice" placeholder="ä¾¡æ ¼" type="number">
    <input id="addInfo" placeholder="èª¬æ˜ï¼ˆä¾‹ï¼šè…¹50%ï¼‰">
    <select id="addGroup">
      <option value="food">é£Ÿã¹ç‰©</option>
      <option value="drink">é£²ã¿ç‰©</option>
    </select>

    <div style="display:flex; gap:10px; margin-top:10px;">
      <button class="btn small" id="addCancel" style="flex:1;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn small" id="addConfirm" style="flex:1;">è¿½åŠ </button>
    </div>
  </div>
</div>

<!-- ==========================
  å‰Šé™¤ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
=========================== -->
<div id="deleteDialog" class="dialog hidden" style="
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,0.6); z-index:9999;">
  <div class="dialog-content" style="
    background:linear-gradient(180deg,#0f1113,#141417);
    padding:16px; border-radius:12px; width:320px;
    color:var(--muted); border:1px solid rgba(255,255,255,0.02);">
    <h3>å‰Šé™¤ç¢ºèª</h3>
    <div id="deleteTargetName" style="margin-bottom:14px;"></div>

    <div style="display:flex; gap:10px;">
      <button class="btn small" id="deleteCancel" style="flex:1;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn small" id="deleteConfirm" style="
        flex:1; background:rgba(185,74,74,0.25); color:#ffbdbd;">å‰Šé™¤ã™ã‚‹</button>
    </div>
  </div>
</div>

<!-- ==========================
  JavaScript æœ¬ä½“
=========================== -->
<script>
// ===================================
// åº—èˆ—ãƒ‡ãƒ¼ã‚¿
// ===================================
const stores = {
  "Bar105": {
    displayName: "Bar105",
    menus: {
      food: [
        {name:"ã‚¢ãƒ’ãƒ¼ã‚¸ãƒ§", info:"è…¹50%", price:10000},
        {name:"ã‚Šã‚“ã”ã¨ã‚·ãƒŠãƒ¢ãƒ³ã®ã‚¹ãƒ†ã‚£ãƒƒã‚¯", info:"è…¹40%", price:6000},
        {name:"ã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼", info:"è…¹35%", price:4500},
        {name:"ç”Ÿãƒãƒ ", info:"è…¹35%", price:4500},
        {name:"ãƒŸãƒƒã‚¯ã‚¹ãƒŠãƒƒãƒ„", info:"è…¹20%", price:3000},
      ],
      drink: [
        {name:"ãƒ†ã‚­ãƒ¼ãƒ©ã‚µãƒ³ãƒ©ã‚¤ã‚º", info:"æ°´åˆ†50%", price:15000},
        {name:"ãƒãƒ†ã‚£ãƒ¼ãƒ‹", info:"æ°´åˆ†50%", price:15000},
        {name:"ãƒãƒ³ãƒãƒƒã‚¿ãƒ³", info:"æ°´åˆ†50%", price:15000},
        {name:"ãƒ¢ãƒ’ãƒ¼ãƒˆ", info:"æ°´åˆ†40%", price:7000},
        {name:"ã‚¦ã‚£ã‚¹ã‚­ãƒ¼(ãƒ­ãƒƒã‚¯)", info:"æ°´åˆ†40%", price:7000},
        {name:"ã‚¸ãƒ³ãƒˆãƒ‹ãƒƒã‚¯", info:"æ°´åˆ†35%", price:5500},
        {name:"ã‚«ãƒ«ãƒ¼ã‚¢ãƒŸãƒ«ã‚¯", info:"æ°´åˆ†35%", price:5500},
        {name:"ãƒ•ã‚¡ã‚¸ãƒ¼ãƒãƒ¼ãƒ–ãƒ«", info:"æ°´åˆ†35%", price:5500},
        {name:"ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«", info:"æ°´åˆ†20%", price:4000},
        {name:"æœŸé–“é™å®šãƒ‰ãƒªãƒ³ã‚¯", info:"", price:30000},
      ]
    }
  },

  "CLUB210": {
    displayName: "CLUB210",
    menus: {
      food: [
        {name:"ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„", info:"è…¹50%", price:18000},
        {name:"ã‚ªãƒªãƒ¼ãƒ–", info:"è…¹40%", price:12600},
        {name:"ç”Ÿãƒãƒ§ã‚³", info:"è…¹35%", price:9000},
      ],
      drink: [
        {name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³", info:"æ°´åˆ†50%", price:21000},
        {name:"ãƒ†ã‚­ãƒ¼ãƒ©", info:"æ°´åˆ†40%", price:12600},
        {name:"ãƒ“ãƒ¼ãƒ«", info:"æ°´åˆ†35%", price:9000},
      ]
    }
  },

  "LOUNGE315": {
    displayName: "LOUNGE315",
    menus: {
      food: [
        {name:"ãƒ‘ãƒ—ãƒªã‚«ã®ãƒ‰ãƒªã‚¢", info:"è…¹50%", price:21000},
        {name:"ã‚«ãƒŠãƒƒãƒšï¼ˆãƒ”ãƒ³ãƒãƒ§ã‚¹ï¼‰", info:"è…¹35%", price:10500},
      ],
      drink: [
        {name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³", info:"æ°´åˆ†50%", price:21000},
        {name:"ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒªãƒ³ã‚°ãƒ¯ã‚¤ãƒ³", info:"æ°´åˆ†40%", price:14700},
        {name:"ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼", info:"æ°´åˆ†40%", price:14700},
        {name:"ãƒ¯ã‚¤ãƒ³", info:"æ°´åˆ†35%", price:10500},
      ]
    }
  }
};

// ===================================
// URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ?store=bar105 ãªã©ï¼‰
// ===================================
function getStoreFromURL() {
  const params = new URLSearchParams(location.search);
  const raw = params.get("store");
  if (!raw) return "Bar105";

  const normalized = raw.toLowerCase();
  return Object.keys(stores).find(k => k.toLowerCase() === normalized) || "Bar105";
}

let currentStoreKey = getStoreFromURL();
let currentStore = JSON.parse(JSON.stringify(stores[currentStoreKey]));

// ã‚¿ã‚¤ãƒˆãƒ«åæ˜ 
document.getElementById("pageTitle").textContent =
  "ğŸ¸ " + currentStore.displayName + " â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«";

// ===================================
// æ•°é‡ç®¡ç†
// ===================================
const qtyMap = {};

function addQty(id, num) {
  qtyMap[id] = (qtyMap[id] || 0) + num;
  if (qtyMap[id] < 0) qtyMap[id] = 0;

  document.getElementById("qty_" + id).textContent = qtyMap[id];
  renderSummary();
}

// ===================================
// ãƒ¡ãƒ‹ãƒ¥ãƒ¼æç”»
// ===================================
function renderMenus() {
  const area = document.getElementById("menuArea");
  area.innerHTML = "";

  ["food", "drink"].forEach(group => {
    const box = document.createElement("div");
    box.className = "menu-group";

    box.innerHTML = `
      <div class="menu-group-header">
        <h2>${group === "food" ? "ğŸ½ é£Ÿã¹ç‰©" : "ğŸ¥‚ é£²ã¿ç‰©"}</h2>
        <button class="sort-btn btn small" onclick="sortGroup('${group}')">ä¾¡æ ¼ã§ä¸¦ã³æ›¿ãˆ</button>
      </div>
    `;

    currentStore.menus[group].forEach((item, index) => {
      const itemId = `${group}_${index}`;

      const div = document.createElement("div");
      div.className = "menu-item";

      div.innerHTML = `
        <div class="top-line">
          <div class="name">${item.name}</div>
          <div class="price">Â¥${item.price.toLocaleString()}</div>
        </div>

        <div class="qty-label">${item.info}</div>

        <div class="controls-row">
          <div class="btn-row">
            <button class="qty-btn" onclick="addQty('${itemId}', 1)">+1</button>
            <button class="qty-btn" onclick="addQty('${itemId}', 5)">+5</button>
            <button class="qty-btn" onclick="addQty('${itemId}', 10)">+10</button>
            <button class="qty-btn" onclick="addQty('${itemId}', 50)">+50</button>

            <span id="qty_${itemId}" class="qty">0</span>

            <button class="qty-btn" onclick="addQty('${itemId}', -1)">-1</button>
            <button class="qty-btn" onclick="addQty('${itemId}', -5)">-5</button>
            <button class="qty-btn" onclick="addQty('${itemId}', -10)">-10</button>
            <button class="qty-btn" onclick="addQty('${itemId}', -50)">-50</button>
          </div>

          <button class="delete-btn" onclick="openDeleteDialog('${group}', ${index})">å‰Šé™¤</button>
        </div>
      `;

      box.appendChild(div);
    });

    area.appendChild(box);
  });

  renderSummary();
}

renderMenus();

// ===================================
// åˆè¨ˆé‡‘é¡
// ===================================
function renderSummary() {
  let total = 0;
  let html = "";

  Object.keys(qtyMap).forEach(id => {
    const q = qtyMap[id];
    if (q > 0) {
      const [group, index] = id.split("_");
      const item = currentStore.menus[group][index];
      const sub = item.price * q;

      total += sub;

      html += `
        <div class="order-line">
          <span>${item.name} Ã— ${q}</span>
          <span>Â¥${sub.toLocaleString()}</span>
        </div>
      `;
    }
  });

  document.getElementById("summary").innerHTML =
    html + `<div class="total">åˆè¨ˆï¼šÂ¥${total.toLocaleString()}</div>`;

  document.getElementById("totalAmountFooter").textContent =
    `åˆè¨ˆï¼šÂ¥${total.toLocaleString()}`;
}

// ===================================
// ä¸¦ã³æ›¿ãˆ
// ===================================
function sortGroup(group) {
  currentStore.menus[group].sort((a, b) => a.price - b.price);
  renderMenus();
}

// ===================================
// å‰Šé™¤ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
// ===================================
let deleteGroup = null;
let deleteIndex = null;

function openDeleteDialog(group, index) {
  deleteGroup = group;
  deleteIndex = index;

  deleteTargetName.textContent =
    `ã€Œ${currentStore.menus[group][index].name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`;

  deleteDialog.classList.remove("hidden");
}

deleteCancel.onclick = () => deleteDialog.classList.add("hidden");

deleteConfirm.onclick = () => {
  currentStore.menus[deleteGroup].splice(deleteIndex, 1);
  deleteDialog.classList.add("hidden");
  renderMenus();
};

// ===================================
// ç·¨é›†ãƒ¢ãƒ¼ãƒ‰
// ===================================
let isEditMode = false;

editModeBtn.onclick = () => {
  isEditMode = !isEditMode;

  if (isEditMode) {
    document.body.classList.add("edit-mode");
    editModeBtn.textContent = "ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ï¼šON";
  } else {
    document.body.classList.remove("edit-mode");
    editModeBtn.textContent = "ç·¨é›†ãƒ¢ãƒ¼ãƒ‰";
  }
};

// ===================================
// ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ 
// ===================================
addCancel.onclick = () => addDialog.classList.add("hidden");

addConfirm.onclick = () => {
  const name = addName.value.trim();
  const price = Number(addPrice.value);
  const info = addInfo.value.trim();
  const group = addGroup.value;

  if (!name || !price) {
    alert("åå‰ã¨ä¾¡æ ¼ã¯å¿…é ˆã§ã™");
    return;
  }

  currentStore.menus[group].push({ name, price, info });

  addName.value = "";
  addPrice.value = "";
  addInfo.value = "";

  addDialog.classList.add("hidden");
  renderMenus();
};

// ===================================
// ãƒ‡ãƒã‚¤ã‚¹åˆ‡ã‚Šæ›¿ãˆ
// ===================================
let forcedMode = null;

function applyDeviceMode() {
  let isMobile = forcedMode === "mobile"
    ? true
    : forcedMode === "pc"
      ? false
      : window.innerWidth < 600;

  deviceIndicator.textContent = isMobile
    ? "ğŸ“± ã‚¹ãƒãƒ›è¡¨ç¤º"
    : "ğŸ–¥ PCè¡¨ç¤º";

  if (isMobile) document.body.classList.add("mobile-mode");
  else document.body.classList.remove("mobile-mode");
}

window.onresize = applyDeviceMode;
applyDeviceMode();

deviceToggleBtn.onclick = () => {
  if (forcedMode === "mobile") forcedMode = "pc";
  else if (forcedMode === "pc") forcedMode = null;
  else forcedMode = "mobile";

  applyDeviceMode();
};

// ===================================
// ãƒªã‚»ãƒƒãƒˆ
// ===================================
function resetAll() {
  Object.keys(qtyMap).forEach(k => qtyMap[k] = 0);
  renderMenus();
}

footerResetBtn.onclick = () => resetAll();

</script>

<!-- ==========================
  è¿½å°¾ãƒ•ãƒƒã‚¿ãƒ¼
=========================== -->
<div class="total-bar">
  <div class="total-bar-inner">
    <div id="totalAmountFooter" class="total-text">åˆè¨ˆï¼šÂ¥0</div>
    <button id="footerResetBtn" class="reset-btn-footer">ãƒªã‚»ãƒƒãƒˆ</button>
  </div>
</div>

</main>
</body>
</html>
