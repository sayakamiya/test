<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>ğŸ¸ GOG â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï¼ˆã‚¹ãƒãƒ›/PCå¯¾å¿œï¼‰</title>

<style>
  :root{
    --gold:#c9a227;
    --muted:#d9cfc6;
    --navy:#0b1530;
    --card-bg:#0f1726;
    --card-wood:#141418;
    --accent-dark:#201814;
    --gap:12px;
    --btn-size-desktop:40px;
    --btn-size-mobile:54px;
    --radius:12px;
    --danger:#b94a4a;
    --glass: rgba(255,255,255,0.03);
  }

  *{box-sizing:border-box;}
  html,body{height:100%; margin:0;}

  body{
    padding:20px;
    font-family:"Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, var(--navy), #071028);
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    display:flex;
    flex-direction:column;
    padding-bottom:260px; /* ãƒ•ãƒƒã‚¿ãƒ¼ã®ãŸã‚ã®ä½™ç™½ */
  }

  main{
    flex:1;
    display:flex;
    flex-direction:column;
    width:100%;
  }

  .container{max-width:1200px; margin:0 auto;}

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:18px;
  }

  .title-wrap{display:flex; flex-direction:column;}
  h1{margin:0; color:var(--gold); font-size:20px;}
  .subtitle{font-size:13px; color:#d6c99a;}

  .top-controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
  .btn{
    background: linear-gradient(180deg,#2b2330,#271f1b);
    color:var(--muted);
    border:1px solid rgba(255,255,255,0.04);
    border-radius:10px;
    padding:8px 10px;
    cursor:pointer;
    font-size:14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.45);
  }
  .btn:hover{filter:brightness(1.05); color:var(--gold);}

  .menu-area{display:grid; grid-template-columns:1fr 1fr; gap:18px;}
  @media (max-width:900px){ .menu-area{grid-template-columns:1fr;} }

  .menu-group{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    padding:14px;
    border-radius:var(--radius);
    box-shadow: 0 8px 28px rgba(0,0,0,0.45);
    border:1px solid rgba(255,255,255,0.02);
  }

  .menu-group-header{
    background: rgba(201,162,39,0.12);
    padding: 10px 14px;
    border-radius: 10px;
    margin-bottom:14px;
    border: 1px solid rgba(201,162,39,0.25);
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .menu-group-header h2{
    margin:0;
    font-size:20px;
    color:var(--gold);
    font-weight:900;
    display:flex;
    align-items:center;
  }

  .menu-item{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));
    border-radius:10px;
    padding:12px;
    margin-bottom:14px;
    border:1px solid rgba(255,255,255,0.02);
  }

  .top-line{
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .name{font-weight:700; font-size:15px;}
  .price{min-width:90px; text-align:right; color:#efe9d6; font-weight:700;}

  .qty-label{font-size:13px; color:#d0c6b8;}

  .controls-row{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:8px;
  }

  .btn-row{
    display:flex;
    align-items:center;
    gap:8px;
  }

  .qty-btn{
    width:var(--btn-size-desktop);
    height:var(--btn-size-desktop);
    display:grid;
    place-items:center;
    border-radius:8px;
    background:linear-gradient(180deg,#241b16,#3a2b24);
    color:var(--muted);
    border:1px solid rgba(255,255,255,0.03);
    cursor:pointer;
    font-weight:800;
    touch-action:manipulation;
  }

  .qty{min-width:56px; text-align:center; font-weight:800; font-size:16px; color:#fff;}

  .delete-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.04);
    padding:6px 8px;
    border-radius:8px;
    color:var(--muted);
    cursor:pointer;
  }

  .summary{
    margin-top:20px;
    padding:14px;
    background:rgba(255,255,255,0.03);
    border-radius:12px;
  }

  .order-line{
    display:flex;
    justify-content:space-between;
    margin-bottom:8px;
  }

  /* --- ãƒ•ãƒƒã‚¿ãƒ¼ --- */
  .total-bar{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    display:flex;
    justify-content:center;
    z-index:9999;
  }

  .total-bar-inner{
    width:100%;
    max-width:1200px;
    background:linear-gradient(180deg,#c9a227,#9f821d);
    padding:12px 18px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-top:2px solid rgba(255,255,255,0.3);
    box-shadow:0 -4px 18px rgba(0,0,0,0.6);
  }

  .total-text{
    font-size:22px;
    font-weight:900;
    color:white;
  }

  .reset-btn-footer{
    padding:10px 18px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.45);
    color:white;
    background:rgba(0,0,0,0.25);
    cursor:pointer;
  }

  .device-indicator{
    position:fixed;
    bottom:80px;
    right:10px;
    background:rgba(0,0,0,0.45);
    padding:6px 10px;
    border-radius:8px;
  }

  .top-logo{ display:none !important; }
</style>
</head>

<body>
<main>
<div class="container">

<header>
  <div class="title-wrap">
    <h1 id="pageTitle">ğŸ¸ GOG ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>
    <div class="subtitle">ã‚¹ãƒãƒ› / PC è‡ªå‹•åˆ‡æ›¿å¯¾å¿œ</div>
  </div>

  <div class="top-controls">
    <button class="btn small" id="editModeBtn">ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</button>
    <button class="btn small" id="deviceToggleBtn">PC/ã‚¹ãƒãƒ›åˆ‡æ›¿</button>
  </div>
</header>

<div id="menuArea" class="menu-area"></div>

<div id="summary" class="summary"></div>

</div> <!-- container -->

<!-- ãƒ‡ãƒã‚¤ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
<div id="deviceIndicator" class="device-indicator"></div>

<!-- è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
<div id="addDialog" class="dialog hidden">
  <div class="dialog-content">
    <h3>ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ </h3>
    <input id="addName" placeholder="å•†å“å">
    <input id="addPrice" placeholder="ä¾¡æ ¼" type="number">
    <input id="addInfo" placeholder="èª¬æ˜ï¼ˆä¾‹ï¼šè…¹50%ï¼‰">
    <select id="addGroup">
      <option value="food">é£Ÿã¹ç‰©</option>
      <option value="drink">é£²ã¿ç‰©</option>
    </select>

    <div class="dialog-buttons">
      <button class="btn small" id="addCancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn small" id="addConfirm">è¿½åŠ </button>
    </div>
  </div>
</div>

<!-- å‰Šé™¤ãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
<div id="deleteDialog" class="dialog hidden">
  <div class="dialog-content">
    <h3>å‰Šé™¤ç¢ºèª</h3>
    <div id="deleteTargetName" style="margin-bottom:10px;"></div>

    <div class="dialog-buttons">
      <button class="btn small" id="deleteCancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn small" id="deleteConfirm"
        style="background:rgba(185,74,74,0.25); color:#ffbdbd;">å‰Šé™¤ã™ã‚‹</button>
    </div>
  </div>
</div>

<!-- è¿½å°¾ãƒ•ãƒƒã‚¿ãƒ¼ -->
<div class="total-bar">
  <div class="total-bar-inner">
    <div id="totalAmountFooter" class="total-text">åˆè¨ˆï¼šÂ¥0</div>
    <button id="footerResetBtn" class="reset-btn-footer">ãƒªã‚»ãƒƒãƒˆ</button>
  </div>
</div>

</main>

<script>
// ==============================
// åº—èˆ—ãƒ‡ãƒ¼ã‚¿
// ==============================
const stores = {
  "Bar105": {
    displayName: "Bar105",
    logo: "logo.png",
    menus: {
      food: [
        {name:"ã‚¢ãƒ’ãƒ¼ã‚¸ãƒ§", info:"è…¹50%", price:10000},
        {name:"ã‚Šã‚“ã”ã¨ã‚·ãƒŠãƒ¢ãƒ³ã®ã‚¹ãƒ†ã‚£ãƒƒã‚¯", info:"è…¹40%", price:6000},
        {name:"ã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼", info:"è…¹35%", price:4500},
        {name:"ç”Ÿãƒãƒ ", info:"è…¹35%", price:4500},
        {name:"ãƒŸãƒƒã‚¯ã‚¹ãƒŠãƒƒãƒ„", info:"è…¹20%", price:3000},
      ],
      drink: [
        {name:"ãƒ†ã‚­ãƒ¼ãƒ©ã‚µãƒ³ãƒ©ã‚¤ã‚º", info:"æ°´åˆ†50%", price:15000},
        {name:"ãƒãƒ†ã‚£ãƒ¼ãƒ‹", info:"æ°´åˆ†50%", price:15000},
        {name:"ãƒãƒ³ãƒãƒƒã‚¿ãƒ³", info:"æ°´åˆ†50%", price:15000},
        {name:"ãƒ¢ãƒ’ãƒ¼ãƒˆ", info:"æ°´åˆ†40%", price:7000},
        {name:"ã‚¦ã‚£ã‚¹ã‚­ãƒ¼(ãƒ­ãƒƒã‚¯)", info:"æ°´åˆ†40%", price:7000},
        {name:"ã‚¸ãƒ³ãƒˆãƒ‹ãƒƒã‚¯", info:"æ°´åˆ†35%", price:5500},
        {name:"ã‚«ãƒ«ãƒ¼ã‚¢ãƒŸãƒ«ã‚¯", info:"æ°´åˆ†35%", price:5500},
        {name:"ãƒ•ã‚¡ã‚¸ãƒ¼ãƒãƒ¼ãƒ–ãƒ«", info:"æ°´åˆ†35%", price:5500},
        {name:"ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«", info:"æ°´åˆ†20%", price:4000},
        {name:"æœŸé–“é™å®šãƒ‰ãƒªãƒ³ã‚¯", info:"", price:30000},
      ]
    }
  },

  "CLUB210": {
    displayName: "CLUB210",
    logo: "logo.png",
    menus: {
      food: [
        {name:"ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„", info:"è…¹50%", price:18000},
        {name:"ã‚ªãƒªãƒ¼ãƒ–", info:"è…¹40%", price:12600},
        {name:"ç”Ÿãƒãƒ§ã‚³", info:"è…¹35%", price:9000},
      ],
      drink: [
        {name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³", info:"æ°´åˆ†50%", price:21000},
        {name:"ãƒ†ã‚­ãƒ¼ãƒ©", info:"æ°´åˆ†40%", price:12600},
        {name:"ãƒ“ãƒ¼ãƒ«", info:"æ°´åˆ†35%", price:9000},
      ]
    }
  },

  "LOUNGE315": {
    displayName: "LOUNGE315",
    logo: "logo.png",
    menus: {
      food: [
        {name:"ãƒ‘ãƒ—ãƒªã‚«ã®ãƒ‰ãƒªã‚¢", info:"è…¹50%", price:21000},
        {name:"ã‚«ãƒŠãƒƒãƒšï¼ˆãƒ”ãƒ³ãƒãƒ§ã‚¹ï¼‰", info:"è…¹35%", price:10500},
      ],
      drink: [
        {name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³", info:"æ°´åˆ†50%", price:21000},
        {name:"ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒªãƒ³ã‚°ãƒ¯ã‚¤ãƒ³", info:"æ°´åˆ†40%", price:14700},
        {name:"ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼", info:"æ°´åˆ†40%", price:14700},
        {name:"ãƒ¯ã‚¤ãƒ³", info:"æ°´åˆ†35%", price:10500},
      ]
    }
  }
};

// URL ã‹ã‚‰åº—èˆ—ã‚­ãƒ¼å–å¾—ï¼ˆå¤§æ–‡å­—å°æ–‡å­—ç„¡è¦–ï¼‰
function getStoreFromURL() {
  const params = new URLSearchParams(location.search);
  let store = params.get("store");
  if (!store) return "Bar105";
  const normalized = store.toLowerCase();
  const matched = Object.keys(stores).find(key => key.toLowerCase() === normalized);
  return matched || "Bar105";
}

let currentStoreKey = getStoreFromURL();
let currentStore = JSON.parse(JSON.stringify(stores[currentStoreKey]));

// æ•°é‡ãƒãƒƒãƒ—
const qtyMap = {};

// DOM å–å¾—
const menuArea = document.getElementById("menuArea");
const summaryEl = document.getElementById("summary");
const pageTitleEl = document.getElementById("pageTitle");
const deviceIndicator = document.getElementById("deviceIndicator");
const editModeBtn = document.getElementById("editModeBtn");
const deviceToggleBtn = document.getElementById("deviceToggleBtn");
const addDialog = document.getElementById("addDialog");
const addName = document.getElementById("addName");
const addPrice = document.getElementById("addPrice");
const addInfo = document.getElementById("addInfo");
const addGroup = document.getElementById("addGroup");
const addCancel = document.getElementById("addCancel");
const addConfirm = document.getElementById("addConfirm");
const deleteDialog = document.getElementById("deleteDialog");
const deleteTargetName = document.getElementById("deleteTargetName");
const deleteCancel = document.getElementById("deleteCancel");
const deleteConfirm = document.getElementById("deleteConfirm");
const totalAmountFooter = document.getElementById("totalAmountFooter");
const footerResetBtn = document.getElementById("footerResetBtn");

// ã‚¿ã‚¤ãƒˆãƒ«åæ˜ 
function applyStoreBranding() {
  pageTitleEl.textContent = "ğŸ¸ " + currentStore.displayName + " â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«";
}

// æ•°é‡åŠ ç®—
function addQty(id, num) {
  qtyMap[id] = (qtyMap[id] || 0) + num;
  if (qtyMap[id] < 0) qtyMap[id] = 0;
  const el = document.getElementById("qty_" + id);
  if (el) el.textContent = qtyMap[id];
  renderSummary();
}

// ãƒ¡ãƒ‹ãƒ¥ãƒ¼æç”»
function renderMenus() {
  menuArea.innerHTML = "";

  ["food", "drink"].forEach(group => {
    const box = document.createElement("div");
    box.className = "menu-group";

    box.innerHTML = `
      <div class="menu-group-header">
        <h2>${group === "food" ? "ğŸ½ é£Ÿã¹ç‰©" : "ğŸ¥‚ é£²ã¿ç‰©"}</h2>
        <button class="sort-btn" data-group="${group}">ä¾¡æ ¼ã§ä¸¦ã³æ›¿ãˆ</button>
      </div>
    `;

    currentStore.menus[group].forEach((item, index) => {
      const itemId = `${group}_${index}`;
      const div = document.createElement("div");
      div.className = "menu-item";
      div.innerHTML = `
        <div class="top-line">
          <div class="name">${item.name}</div>
          <div class="price">Â¥${item.price.toLocaleString()}</div>
        </div>
        <div class="qty-label">${item.info}</div>

        <div class="controls-row">
          <div class="btn-row">
            <button class="qty-btn" data-id="${itemId}" data-delta="1">+1</button>
            <button class="qty-btn" data-id="${itemId}" data-delta="5">+5</button>
            <button class="qty-btn" data-id="${itemId}" data-delta="10">+10</button>
            <button class="qty-btn" data-id="${itemId}" data-delta="50">+50</button>

            <span id="qty_${itemId}" class="qty">${qtyMap[itemId] || 0}</span>

            <button class="qty-btn" data-id="${itemId}" data-delta="-1">-1</button>
            <button class="qty-btn" data-id="${itemId}" data-delta="-5">-5</button>
            <button class="qty-btn" data-id="${itemId}" data-delta="-10">-10</button>
            <button class="qty-btn" data-id="${itemId}" data-delta="-50">-50</button>
          </div>

          <button class="delete-btn" data-del-group="${group}" data-del-index="${index}">å‰Šé™¤</button>
        </div>
      `;
      box.appendChild(div);
    });

    menuArea.appendChild(box);
  });

  renderSummary();
}

// åˆè¨ˆæç”»
function renderSummary() {
  let total = 0;
  let html = "";

  Object.keys(qtyMap).forEach(id => {
    const q = qtyMap[id];
    if (q > 0) {
      const [group, index] = id.split("_");
      const item = currentStore.menus[group][index];
      if (!item) return;
      const sub = item.price * q;
      total += sub;
      html += `
        <div class="order-line">
          <span>${item.name} Ã— ${q}</span>
          <span>Â¥${sub.toLocaleString()}</span>
        </div>
      `;
    }
  });

  summaryEl.innerHTML = html + `<div class="total">åˆè¨ˆï¼šÂ¥${total.toLocaleString()}</div>`;
  totalAmountFooter.textContent = `åˆè¨ˆï¼šÂ¥${total.toLocaleString()}`;
}

// ä¸¦ã¹æ›¿ãˆ
function sortGroup(group) {
  currentStore.menus[group].sort((a,b) => a.price - b.price);
  renderMenus();
}

// å‰Šé™¤ãƒ€ã‚¤ã‚¢ãƒ­ã‚°åˆ¶å¾¡
let deleteGroup = null;
let deleteIndex = null;

function openDeleteDialog(group, index) {
  deleteGroup = group;
  deleteIndex = index;
  deleteTargetName.textContent =
    `ã€Œ${currentStore.menus[group][index].name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`;
  deleteDialog.classList.remove("hidden");
}

// ã‚¤ãƒ™ãƒ³ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
function setupEvents() {
  // æ•°é‡ãƒœã‚¿ãƒ³ / ä¸¦ã³æ›¿ãˆ / å‰Šé™¤ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒªã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  menuArea.addEventListener("click", (e) => {
    const btn = e.target.closest(".qty-btn");
    if (btn && btn.dataset.id) {
      const id = btn.dataset.id;
      const delta = Number(btn.dataset.delta || 0);
      addQty(id, delta);
    }

    const sortBtn = e.target.closest(".sort-btn");
    if (sortBtn && sortBtn.dataset.group) {
      sortGroup(sortBtn.dataset.group);
    }

    const delBtn = e.target.closest(".delete-btn");
    if (delBtn && delBtn.dataset.delGroup) {
      openDeleteDialog(delBtn.dataset.delGroup, Number(delBtn.dataset.delIndex));
    }
  });

  // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ â†’ è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  editModeBtn.addEventListener("click", () => {
    addDialog.classList.remove("hidden");
  });
  addCancel.addEventListener("click", () => {
    addDialog.classList.add("hidden");
  });
  addConfirm.addEventListener("click", () => {
    const name = addName.value.trim();
    const price = Number(addPrice.value);
    const info = addInfo.value.trim();
    const group = addGroup.value;
    if (!name || !price) {
      alert("åå‰ã¨ä¾¡æ ¼ã¯å¿…é ˆã§ã™");
      return;
    }
    currentStore.menus[group].push({ name, price, info });
    addName.value = "";
    addPrice.value = "";
    addInfo.value = "";
    addDialog.classList.add("hidden");
    renderMenus();
  });

  // å‰Šé™¤ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  deleteCancel.addEventListener("click", () => {
    deleteDialog.classList.add("hidden");
  });
  deleteConfirm.addEventListener("click", () => {
    if (deleteGroup != null && deleteIndex != null) {
      currentStore.menus[deleteGroup].splice(deleteIndex, 1);
      deleteDialog.classList.add("hidden");
      renderMenus();
    }
  });

  // ãƒ‡ãƒã‚¤ã‚¹è¡¨ç¤ºåˆ‡æ›¿
  let forcedMode = null;
  function applyDeviceMode() {
    let isMobile;
    if (forcedMode === "mobile") isMobile = true;
    else if (forcedMode === "pc") isMobile = false;
    else isMobile = window.innerWidth < 600;

    deviceIndicator.textContent = isMobile ? "ğŸ“± ã‚¹ãƒãƒ›è¡¨ç¤º" : "ğŸ–¥ PCè¡¨ç¤º";
    if (isMobile) document.body.classList.add("mobile-mode");
    else document.body.classList.remove("mobile-mode");
  }
  window.addEventListener("resize", applyDeviceMode);
  applyDeviceMode();

  deviceToggleBtn.addEventListener("click", () => {
    if (forcedMode === "mobile") forcedMode = "pc";
    else if (forcedMode === "pc") forcedMode = null;
    else forcedMode = "mobile";
    applyDeviceMode();
  });

  // ãƒªã‚»ãƒƒãƒˆ
  footerResetBtn.addEventListener("click", () => {
    Object.keys(qtyMap).forEach(k => qtyMap[k] = 0);
    renderMenus();
  });
}

// åˆæœŸåŒ–
applyStoreBranding();
renderMenus();
setupEvents();
</script>

</body>
</html>
